SuccessConsole Output

Started by user admin-sree
Obtained Jenkinsfile from git https://github.com/sreejith-vu/level2.git
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/3rdPipelineProject
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
No credentials specified
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/sreejith-vu/level2.git # timeout=10
Fetching upstream changes from https://github.com/sreejith-vu/level2.git
 > git --version # timeout=10
 > git fetch --tags --progress https://github.com/sreejith-vu/level2.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 599291227fbdd3293ac78883b2374d9b9175b261 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 599291227fbdd3293ac78883b2374d9b9175b261
Commit message: "Update tag-and-push-to-repo.sh"
 > git rev-list --no-walk bc3db22ab62273ea59540105eb63e5748ba47ff5 # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Building Containers)
[Pipeline] sh
+ bash ./build-containers.sh
Removing network 3rdpipelineproject_default
Network 3rdpipelineproject_default not found.
Building backend-app-srv
Step 1/9 : FROM alpine
 ---> b7b28af77ffe
Step 2/9 : MAINTAINER Sreejith VU (sreejithvu@outlook.com)
 ---> Running in 3ccb302342f8
Removing intermediate container 3ccb302342f8
 ---> 505fadb64438
Step 3/9 : RUN apk add --update python py-pip && apk add bash curl
 ---> Running in 5a80ff8cb1b6
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.10/community/x86_64/APKINDEX.tar.gz
(1/12) Installing libbz2 (1.0.6-r7)
(2/12) Installing expat (2.2.7-r0)
(3/12) Installing libffi (3.2.1-r6)
(4/12) Installing gdbm (1.13-r1)
(5/12) Installing ncurses-terminfo-base (6.1_p20190518-r0)
(6/12) Installing ncurses-terminfo (6.1_p20190518-r0)
(7/12) Installing ncurses-libs (6.1_p20190518-r0)
(8/12) Installing readline (8.0.0-r0)
(9/12) Installing sqlite-libs (3.28.0-r0)
(10/12) Installing python2 (2.7.16-r1)
(11/12) Installing py-setuptools (40.8.0-r1)
(12/12) Installing py2-pip (18.1-r0)
Executing busybox-1.30.1-r2.trigger
OK: 65 MiB in 26 packages
(1/5) Installing bash (5.0.0-r0)
Executing bash-5.0.0-r0.post-install
(2/5) Installing ca-certificates (20190108-r0)
(3/5) Installing nghttp2-libs (1.38.0-r0)
(4/5) Installing libcurl (7.65.1-r0)
(5/5) Installing curl (7.65.1-r0)
Executing busybox-1.30.1-r2.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 68 MiB in 31 packages

Removing intermediate container 5a80ff8cb1b6
 ---> 74e1a980c23c
Step 4/9 : RUN pip install flask
 ---> Running in d822dc19f537

Collecting flask
  Downloading https://files.pythonhosted.org/packages/9b/93/628509b8d5dc749656a9641f4caf13540e2cdec85276964ff8f43bbb1d3b/Flask-1.1.1-py2.py3-none-any.whl (94kB)
Collecting Jinja2>=2.10.1 (from flask)
  Downloading https://files.pythonhosted.org/packages/1d/e7/fd8b501e7a6dfe492a433deb7b9d833d39ca74916fa8bc63dd1a4947a671/Jinja2-2.10.1-py2.py3-none-any.whl (124kB)
Collecting click>=5.1 (from flask)

  Downloading https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl (81kB)
Collecting Werkzeug>=0.15 (from flask)
  Downloading https://files.pythonhosted.org/packages/d1/ab/d3bed6b92042622d24decc7aadc8877badf18aeca1571045840ad4956d3f/Werkzeug-0.15.5-py2.py3-none-any.whl (328kB)
Collecting itsdangerous>=0.24 (from flask)
  Downloading https://files.pythonhosted.org/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl
Collecting MarkupSafe>=0.23 (from Jinja2>=2.10.1->flask)
  Downloading https://files.pythonhosted.org/packages/b9/2e/64db92e53b86efccfaea71321f597fa2e1b2bd3853d8ce658568f7a13094/MarkupSafe-1.1.1.tar.gz
Installing collected packages: MarkupSafe, Jinja2, click, Werkzeug, itsdangerous, flask
  Running setup.py install for MarkupSafe: started
    Running setup.py install for MarkupSafe: finished with status 'done'

Successfully installed Jinja2-2.10.1 MarkupSafe-1.1.1 Werkzeug-0.15.5 click-7.0 flask-1.1.1 itsdangerous-1.1.0

Removing intermediate container d822dc19f537
 ---> 454c2462ed45
Step 5/9 : RUN pip install requests
 ---> Running in 7c4cbd1eabec

Collecting requests

  Downloading https://files.pythonhosted.org/packages/51/bd/23c926cd341ea6b7dd0b2a00aba99ae0f828be89d72b2190f27c11d4b7fb/requests-2.22.0-py2.py3-none-any.whl (57kB)
Collecting chardet<3.1.0,>=3.0.2 (from requests)
  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)
Collecting idna<2.9,>=2.5 (from requests)
  Downloading https://files.pythonhosted.org/packages/14/2c/cd551d81dbe15200be1cf41cd03869a46fe7226e7450af7a6545bfc474c9/idna-2.8-py2.py3-none-any.whl (58kB)
Collecting urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 (from requests)
  Downloading https://files.pythonhosted.org/packages/e6/60/247f23a7121ae632d62811ba7f273d0e58972d75e58a94d329d51550a47d/urllib3-1.25.3-py2.py3-none-any.whl (150kB)
Collecting certifi>=2017.4.17 (from requests)
  Downloading https://files.pythonhosted.org/packages/69/1b/b853c7a9d4f6a6d00749e94eb6f3a041e342a885b87340b79c1ef73e3a78/certifi-2019.6.16-py2.py3-none-any.whl (157kB)
Installing collected packages: chardet, idna, urllib3, certifi, requests

Successfully installed certifi-2019.6.16 chardet-3.0.4 idna-2.8 requests-2.22.0 urllib3-1.25.3
Removing intermediate container 7c4cbd1eabec
 ---> 990b2c03283a
Step 6/9 : COPY ./MANAGE_EMAIL_BLACKLISTS/ /home/deployment/
 ---> 3a3fdc41cbaf
Step 7/9 : WORKDIR /home/deployment
 ---> Running in 9392603089df
Removing intermediate container 9392603089df
 ---> 8f762ce4f93f
Step 8/9 : EXPOSE 5000
 ---> Running in 29d7a3040f71

Removing intermediate container 29d7a3040f71
 ---> f8ff16b1bede
Step 9/9 : CMD python ./manage_email_blacklists.py
 ---> Running in 6d4322da1939
Removing intermediate container 6d4322da1939
 ---> 274a04c743ce
Successfully built 274a04c743ce
Successfully tagged email-app:v1.5

Creating network "3rdpipelineproject_default" with the default driver

Creating backend-app ... 

[1A[2K
Creating backend-app ... [32mdone[0m
[1B
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Testing)
[Pipeline] sh

+ bash ./test-containers.sh

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
  0    90    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Pushing to Docker HUB Registry and updating Kube YAML files)
[Pipeline] sh
+ bash ./tag-and-push-to-repo.sh
The push refers to repository [docker.io/sreejithvu/kube-public-repo]

1964c7ad25f6: Preparing
2b303fffa4fd: Preparing
444f9de77c1a: Preparing
55c02a9b1027: Preparing
1bfeebd65323: Preparing
1bfeebd65323: Layer already exists

1964c7ad25f6: Pushed

2b303fffa4fd: Pushed
444f9de77c1a: Pushed

55c02a9b1027: Pushed
v1.5: digest: sha256:06c51d423d5d599223596dea6fbdbe4e922865e9ca44b9dc4d1b4fe9c31d45e1 size: 1370
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Cleaning up temporary Containers)

[Pipeline] sh
+ bash ./removing-containers.sh

Stopping backend-app ... 

[1A[2K
Stopping backend-app ... [32mdone[0m
[1BRemoving backend-app ... 
[1A[2K
Removing backend-app ... [32mdone[0m
[1BRemoving network 3rdpipelineproject_default
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploying to Kubernetes Cluster)
[Pipeline] sh
+ bash ./deploy-containers.sh

Release "my-email-app-deploy" has been upgraded.
LAST DEPLOYED: Sat Aug 10 17:46:05 2019
NAMESPACE: development
STATUS: DEPLOYED

RESOURCES:
==> v1/Deployment
NAME     READY  UP-TO-DATE  AVAILABLE  AGE
web-app  0/1    1           0          28m

==> v1/Pod(related)
NAME                      READY  STATUS             RESTARTS  AGE
web-app-6b7b95bdc-fdvwb   0/1    ContainerCreating  0         0s
web-app-748956495d-gb4p7  0/1    InvalidImageName   0         28m

==> v1/Service
NAME             TYPE       CLUSTER-IP    EXTERNAL-IP  PORT(S)   AGE
web-app-service  ClusterIP  10.111.23.74  <none>       5000/TCP  28m

==> v1beta1/Ingress
NAME                HOSTS                ADDRESS  PORTS  AGE
web-domain-ingress  emailwhitelister.ml  80       28m


NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace development -l "app.kubernetes.io/name=my-app,app.kubernetes.io/instance=my-email-app-deploy" -o jsonpath="{.items[0].metadata.name}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl port-forward $POD_NAME 8080:80

[Pipeline] }
[Pipeline] // stage
[Pipeline] }

[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
